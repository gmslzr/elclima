!function(e){"use strict";var t,r,n,i,o,s,a,c,u,l,d,m="https://api.forecast.io/forecast/",p="https://maps.googleapis.com/maps/api/geocode/json?latlng=",g={};e.fn.elClima=function(f){function y(e){return Math.round(5/9*(e-32))}function h(e){return o=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"],o[parseInt(Math.floor((e+11.25)%360/22.5))]}function M(e,t){var r,n=new Date(1e3*e);return"basic"===t?(r=n.getHours()>=12?"PM":"AM",u=n.getHours()>12?n.getHours()-12:n.getHours(),l=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),u+":"+l+" "+r):"full"===t?(d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=n.getFullYear(),a=d[n.getMonth()],s=n.getDate(),u=n.getHours()>12?n.getHours()-12:n.getHours(),r=n.getHours()>=12?"PM":"AM",l=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),a+". "+s+", "+c+" "+u+":"+l+" "+r):void 0}function S(e){return Math.round(1.609*e)}function T(e){var t=[];return 1>e&&(t.scale=0,t.description="Calm"),e>=1&&3>=e&&(t.scale=1,t.description="Light Air"),e>=4&&7>=e&&(t.scale=2,t.description="Light Breeze"),e>=8&&12>=e&&(t.scale=3,t.description="Gentle Breeze"),e>=13&&18>=e&&(t.scale=4,t.description="Moderate Breeze"),e>=19&&24>=e&&(t.scale=5,t.description="Fresh Breeze"),e>=25&&31>=e&&(t.scale=6,t.description="Strong Breeze"),e>=32&&38>=e&&(t.scale=7,t.description="High Wind"),e>=39&&46>=e&&(t.scale=8,t.description="Gale"),e>=47&&54>=e&&(t.scale=9,t.description="Strong Gale"),e>=55&&63>=e&&(t.scale=10,t.description="Storm"),e>=64&&72>=e&&(t.scale=11,t.description="Violent Storm"),e>=73&&(t.scale=12,t.description="Hurricane Force"),t}var b=e.extend({lat:"25.791992",lng:"-80.1337957",localTime:!1,beaufort:!1,metricUnits:!1,getLocationInfo:!1,api_key:"",success:function(e){},error:function(e){}},f);return r=e.ajax({dataType:"jsonp",url:encodeURI(m+b.api_key+"/"+b.lat+","+b.lng),contentType:"application/json"}),b.getLocationInfo===!0&&(t=e.ajax({url:encodeURI(p+b.lat+","+b.lng)})),e.when(t,r).done(function(e,t){b.getLocationInfo===!0&&("OK"===e[0].status?i=e[0].results[0].address_components[3].short_name+", "+e[0].results[0].address_components[5].short_name:b.error({msg:"[El Clima]: There's been an error getting the geocoder information. Verify provided coordinates."})),null!==r&&(n=t[0],g.sunrise=M(n.daily.data[0].sunriseTime,"basic"),g.sunset=M(n.daily.data[0].sunsetTime,"basic"),g.temperature=n.currently.temperature,g.summary=n.currently.summary,g.timezone=n.timezone,g.humidity=100*n.currently.humidity,g.windspeed=n.currently.windSpeed,g.windDirection=h(n.currently.windBearing),g.windBearing=n.currently.windBearing,g.precipitationProbability=n.currently.precipProbability,g.pressure=Math.round(.0295301*n.currently.pressure).toFixed(2),g.icon=n.currently.icon,b.getLocationInfo===!0&&(g.locationInfo=i),b.localTime===!0&&(g.localTime=[],g.localTime.time=n.currently.time,g.localTime.humanTime=M(n.currently.time,"basic"),g.localTime.fullHumanTime=M(n.currently.time,"full")),b.metricUnits===!0&&(g.metricUnits=[],g.metricUnits.temperature=y(n.currently.temperature),g.metricUnits.windspeed=S(n.currently.windSpeed)),b.beaufort===!0&&(g.beaufort=T(n.currently.windSpeed)),b.success({elclima:g}))}).fail(function(e,t){b.error({msg:"[El Clima]: There's been an error retrieving information. HTTP status: "+e.status+". Status string: "+t})}),this}}(jQuery);